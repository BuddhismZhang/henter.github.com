
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Git rebase小计(转) | Henter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="Henter" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/henter-diandian.css" type="text/css" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

    <script type="text/javascript" src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/top.js"></script>
</head>
<body>


<div id="container" class="clear">

    <div class="left viewport" id="left-cont">
        <div class="overview" style="left:0;top:0;">
            
            <div class="logo">
                <a href="/">
                    <span class="logo-mark">
                        <img src="/images/avatar.jpg" />
                    </span>
                </a>
            </div>
            
            <div class="blog-name"><a href="/">Henter</a></div>
            <p class="blog-desc">
                RD at <a href="http://zuo.com/@henter" target="_blank">zuo.com</a>

                <br /><br />
                E-mail: henter@henter.me <br />
                Weibo: <a href="http://weibo.com/henter" target="_blank">@henter</a>
            </p>
            <ul class="nav">
                <li><a href="/about.html">About</a></li>
                <li><a href="/atom.xml">RSS</a></li>
                <li><a href="/archive.html" class="archive">Archive</a></li>
            </ul>

            <!--
            <div class="tag">
                <h3>热门标签</h3>
                <a href="/?tag=henter" title="henter(25)"><span>henter</span></a><a href="/?tag=%E6%97%85%E6%B8%B8" title="旅游(6)"><span>旅游</span></a><a href="/?tag=%E4%BA%94%E4%B8%80" title="五一(3)"><span>五一</span></a><a href="/?tag=%E6%BC%94%E8%AE%B2" title="演讲(2)"><span>演讲</span></a><a href="/?tag=%E5%A5%A5%E5%B7%B4%E9%A9%AC" title="奥巴马(2)"><span>奥巴马</span></a><a href="/?tag=%E6%9C%AC%E6%8B%89%E7%99%BB" title="本拉登(2)"><span>本拉登</span></a><a href="/?tag=%E7%94%B5%E5%BD%B1" title="电影(2)"><span>电影</span></a><a href="/?tag=%E7%BF%BB%E8%AF%91" title="翻译(2)"><span>翻译</span></a><a href="/?tag=%E4%BC%8A%E6%9C%97" title="伊朗(1)"><span>伊朗</span></a><a href="/?tag=%E5%85%AC%E5%BC%80%E8%AF%BE" title="公开课(1)"><span>公开课</span></a>
            </div>
            -->
            
            <div class="music">
                <object type="application/x-shockwave-flash" data="http://x.libdd.com/farm1/082b69/3bc41328/FE257.swf" width="150" height="24" id="fancyplayer" name="fancyplayer">
                    <param name="wmode" value="transparent"></param>
                    <param name="movie" value="http://x.libdd.com/farm1/082b69/3bc41328/FE257.swf"></param>
                    <param name="flashvars" value="mp3=http://a.libdd.com/farm1/19/53EAEE74712880DBF40B0A7915561C13.mp3&amp;"></param>
                </object>
            </div>
            
            <div id="footer">
                &copy; Henter <br />
                2008 - 2013
            </div>

            <span class="arrow"></span>
        </div>
    </div>

    <div class="right">
        <div class="content">
            <article class="post">
    <h1 class="post-title">Git rebase小计(转)</h1>
    <p>git rebase，顾名思义，就是重新定义（re）起点（base）的作用，即重新定义分支的版本库状态。要搞清楚这个东西，要先看看版本库状态切换的两种情况：</p>

<p>我们知道，在某个分支上，我们可以通过git reset，实现将当前分支切换到本分支以前的任何一个版本状态，即所谓的“回溯”。即实现了本分支的“后悔药”。也即版本控制系统的初衷。</p>

<p>还有另一种情况，当我们的项目有多个分支的时候。我们除了在本地开发的时候可能会“回溯”外，也常常会将和自己并行开发的别人的分支修改添加到自 己本地来。这种情况下很常见。作为项目管理员，肯定会不断的合并各个子项目的补丁，并将最新版本推送到公共版本库，而作为开发人员之一，提交自己的补丁之 后，往往需要将自己的工作更新到最新的版本库，也就是说把别的分支的工作包含进来。</p>

<p>举个例子来说吧！
假设我们的项目初期只有一个master分支，然后分支上作过两次提交。这个时候系统只有一个master分支，他的分支历史如下：</p>

<pre><code>master0（初始化后的版本）
||
v
master1（第一次提交后的版本）
||
v
master2（第二次提交后的版本）
</code></pre>

<p>这个时候，我们可以<strong>通过git reset将master分支</strong>（工作目录、工作缓存或者是版本库）切换到master1或者master0版本，这就是前面所说的第一种情况。
假设我们这里把master分支通过git reset回溯到了master1状态。那么这个时候系统仍然只有一个master分支，分支的历史如下：</p>

<pre><code>master0（初始化后的版本）
||
v
master1（第一次提交后的版本）
</code></pre>

<p>然后，我们在这里以master1为起点，创建了另一个分支test。那么对于test分支来说，他的第一个版本test0就和master1是同一个版本，此时项目的分支历史如下：</p>

<pre><code>master0（初始化后的版本）
||
v
master1（第一次提交后的版本）===test0（test分支，初始化自master分支master1状态）
</code></pre>

<p>这个时候，我们分别对master分支、test分支作两次提交，此时版本库应该成了这个样子：</p>

<pre><code>master0（初始化后的版本）
||
v
master1===test0==&gt;test1===&gt;test2
||
v
master2===&gt;master3
</code></pre>

<p>这个时候，通过第一种git reset的方式，可以将master分支的当前状态（master3）回溯到master分支的master0、master1、master2状态。 也可已将test分支当前状态（test2）回溯到test分支的test0、test1状态，以及test分支的父分支master的master0、 master1状态。</p>

<p>那么。如果我要让test分支从test0到test2之间所有的改变都添加到master分支来，使得master分支包含test分支的所有修改。这个时候就要用到git rebase了。</p>

<p>首先，我们切换到master分支，然后运行下面的命令，即可实现我们的要求：</p>

<pre><code>git rebase test
</code></pre>

<p><strong>这个时候，git做了些什么呢？</strong></p>

<pre><code>先将test分支的代码checkout出来，作为工作目录
然后将master分支从test分支创建起的所有改变的补丁，依次打上。如果打补丁的过程没问题，rebase就搞定了

如果打补丁的时候出现了问题，就会提示你处理冲突。处理好了，可以运行git rebase –continue继续直到完成

如果你不想处理，你还是有两个选择，一个是放弃rebase过程（运行git rebase –abort），另一个是直接用test分支的取代当前分支的（git rebase –skip）。
</code></pre>

<p>此外，rebase还能够让你修订以前提交，这个功能日后再说。</p>

<p>=======================================</p>

<p>另外，使用git rebase不要滥用，否则会比较麻烦，需要注意的地方参考下面这篇：
<a href="http://blog.csdn.net/jixiuffff/article/details/5970891">git 关于merge rebase(衍合)</a></p>

<p>转自：
<a href="http://www.cnblogs.com/kym/archive/2010/08/12/1797937.html">http://www.cnblogs.com/kym/archive/2010/08/12/1797937.html</a></p>

<p>参考：
<a href="http://ihower.tw/blog/archives/3843/">使用 git rebase 避免無謂的 merge</a>
<a href="http://blog.csdn.net/jixiuffff/article/details/5970891">git 关于merge rebase(衍合)</a></p>

    <nav class="pagination-link">
        
        
        <a class="next" href="//2013/02/06/try-farbox.html" rel="bookmark">尝试一下FarBox的服务&nbsp;&raquo;</a>
        
     </nav>
     <div id="disqus_thread"></div>
</article>  

            <div class="hr2"></div>
        </div>
    </div>
    
    <a class="fork-me" href="https://github.com/henter/henter.github.com" target="_blank" rel="nofollow">
        <img src="images/forkme.png" alt="Fork me on GitHub">
    </a>

</div>

</body>
</html>
